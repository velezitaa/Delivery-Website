<div id="auth-div">
  <p id="loading-text">Cargando...</p>
  <div id="auth-content" class="hidden">
    <slot />
  </div>

  <script>
    // @ts-nocheck
    import AuthModule from "./auth.module";
    const loadingText = document.querySelector("#loading-text");
    const authContent = document.querySelector("#auth-content");
    const authDiv = document.querySelector("#auth-div");

    try {
      await AuthModule.getLoggedUser();
      location.replace("/");
    } catch (error) {
      if (error.response.status === 401 || error.response.status === 403) {
        authContent.classList.remove("hidden");
      }
    } finally {
      loadingText.remove();
    }
  </script>
</div>
