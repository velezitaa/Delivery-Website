import{B as w}from"./endpoints.QH1VciTq.js";import{c as l}from"./notification.DyHDLNjw.js";import{k as p}from"./index.B9b1t7QR.js";const u=document.querySelector("#signup-form"),t=document.querySelector("#email"),o=document.querySelector("#password"),s=document.querySelector("#verify-password"),f=document.querySelector("#submit-button"),b=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/,y=/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{6,}$/,a={isEmailValid:!1,isPasswordValid:!1,doPasswordsMatch:!1};function i(e,r){r?(e.classList.remove("border-red-500","dark:border-red-500"),e.classList.add("border-green-500","dark:border-green-500")):(e.classList.remove("border-green-500","dark:border-green-500"),e.classList.add("border-red-500","dark:border-red-500")),e.value===""&&e.classList.remove("border-red-500","dark:border-red-500","border-green-500","dark:border-green-500")}function n(){const{isEmailValid:e,isPasswordValid:r,doPasswordsMatch:c}=a;f.disabled=!e||!r||!c}t.addEventListener("input",()=>{const e=b.test(t.value);a.isEmailValid=e,i(t,e),n()});o.addEventListener("input",()=>{const e=y.test(o.value);a.isPasswordValid=e,i(o,e);const r=o.value===s.value&&s.value.length>0;a.doPasswordsMatch=r,i(s,r),n()});s.addEventListener("input",()=>{const e=o.value===s.value&&s.value.length>0;a.doPasswordsMatch=e,i(s,e),n()});u.addEventListener("submit",async e=>{e.preventDefault();const{isEmailValid:r,isPasswordValid:c,doPasswordsMatch:v}=a;if(!(!r||!c||!v))try{await p.post(`${w}/api/users`,{json:{email:t.value,password:o.value}});for(const d in a)a[d]=!1;u.reset(),[t,o,s].forEach(d=>{i(d)}),n(),l({title:"Usuario creado!",description:"Se ha enviado un correo de verificacion a su bandeja de correo",type:"success"})}catch(d){const m=await d?.response?.json();l({title:"Ups! Hubo un error",description:m?.error??"Sin mensaje",type:"error"})}});
